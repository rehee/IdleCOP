# 开发路线图

> 本文档描述 IdleCOP 项目的功能迭代计划与里程碑

## 目录

1. [版本规划概览](#版本规划概览)
2. [阶段0：设计与规划](#阶段0设计与规划)
3. [阶段1：核心系统开发](#阶段1核心系统开发)
4. [阶段2：用户体验与账号系统](#阶段2用户体验与账号系统)
5. [阶段3：多人与扩展内容](#阶段3多人与扩展内容)
6. [长期规划](#长期规划)
7. [风险与依赖](#风险与依赖)

---

## 版本规划概览

```
时间线
──────────────────────────────────────────────────────────►

阶段0          阶段1          阶段2          阶段3
设计规划        核心开发        UX完善         多人扩展
  │              │              │              │
  ▼              ▼              ▼              ▼
┌────┐        ┌────┐        ┌────┐        ┌────┐
│v0.1│───────►│v0.5│───────►│v1.0│───────►│v2.0│
└────┘        └────┘        └────┘        └────┘
 设计           Alpha         Beta          正式版
 文档           可玩          功能完整       多人上线
```

---

## 阶段0：设计与规划

**目标**：固化设计文档与仓库结构

**时间**：1-2周

### 里程碑 0.1 - 设计文档完成

- [x] 创建项目仓库
- [x] 编写 README.md
- [x] 编写 DESIGN.md（主设计文档）
- [x] 编写 docs/gameplay.md（玩法细节）
- [x] 编写 docs/data-models.md（数据模型）
- [x] 编写 docs/ai-instructions.md（指令系统说明）
- [x] 编写 docs/roadmap.md（本文档）
- [x] 创建 Issue 模板
- [x] 创建贡献指南

### 里程碑 0.2 - 技术准备

- [ ] 确定技术栈版本（.NET 8.0, Blazor 版本等）
- [ ] 搭建基础项目结构
- [ ] 配置 CI/CD 流程
- [ ] 设置代码规范（.editorconfig, StyleCop）
- [ ] 创建数据库架构初版

**交付物**：
- 完整设计文档
- 空白项目骨架
- CI/CD 配置

---

## 阶段1：核心系统开发

**目标**：实现地图、演员、基础装备/技能/指令系统

**时间**：8-12周

### 里程碑 1.1 - 核心框架

**预计时间**：2周

- [ ] 实现 Actor 基类与状态机
- [ ] 实现事件系统（EventBus）
- [ ] 实现游戏循环（Game Loop）
- [ ] 实现基础数据序列化

**验收标准**：
- 可以创建和更新 Actor 实例
- 事件可以发布和订阅
- 游戏循环稳定运行

### 里程碑 1.2 - 地图系统

**预计时间**：2周

- [ ] 实现程序化地图生成器
- [ ] 实现区域（Zone）逻辑
- [ ] 实现怪物刷新点
- [ ] 实现基础寻路（A* 算法）
- [ ] 实现地图存档/加载

**验收标准**：
- 输入种子可生成确定性地图
- 区域正确连接
- 怪物在指定点刷新
- 角色可在地图中寻路移动

### 里程碑 1.3 - 装备系统

**预计时间**：2周

- [ ] 实现装备基础模型
- [ ] 实现底材系统
- [ ] 实现品质系统
- [ ] 实现词缀系统（前缀/后缀）
- [ ] 实现掉落表和掉落池
- [ ] 实现装备属性计算

**验收标准**：
- 可生成各品质装备
- 装备正确显示词缀
- 属性计算正确
- 掉落率符合配置

### 里程碑 1.4 - 技能系统

**预计时间**：2周

- [ ] 实现技能基础框架
- [ ] 实现主动技能
- [ ] 实现辅助技能（技能挂接）
- [ ] 实现触发技能
- [ ] 实现技能效果（伤害、控制等）
- [ ] 实现技能冷却和消耗

**验收标准**：
- 技能可以正确释放
- 辅助技能正确修改主技能
- 触发技能在条件满足时触发
- 伤害计算正确

### 里程碑 1.5 - 指令系统

**预计时间**：2周

- [ ] 实现指令数据模型
- [ ] 实现条件评估器
- [ ] 实现动作执行器
- [ ] 实现优先级调度
- [ ] 实现指令序列化/反序列化

**验收标准**：
- 指令按优先级执行
- 条件正确评估
- 动作正确执行
- 可保存/加载指令配置

### 里程碑 1.6 - 通货系统

**预计时间**：1周

- [ ] 实现通货数据模型
- [ ] 实现通货堆叠和存储
- [ ] 实现账号共享通货
- [ ] 实现通货使用效果

**验收标准**：
- 通货正确堆叠
- 通货可在角色间共享
- 通货效果正确应用

### 阶段1交付物

- 可运行的核心游戏引擎
- 程序化地图生成
- 完整的装备词缀系统
- 功能完整的技能系统
- 基础指令/AI系统
- 通货系统

---

## 阶段2：用户体验与账号系统

**目标**：UX编辑器、账号系统、存储同步

**时间**：6-8周

### 里程碑 2.1 - 基础UI框架

**预计时间**：2周

- [ ] 搭建 Blazor Web 项目
- [ ] 实现游戏主界面框架
- [ ] 实现角色信息面板
- [ ] 实现装备/背包界面
- [ ] 实现技能配置界面

### 里程碑 2.2 - 指令编辑器

**预计时间**：2周

- [ ] 实现可视化指令编辑器
- [ ] 实现条件/动作选择器
- [ ] 实现拖拽排序
- [ ] 实现指令导入/导出
- [ ] 实现指令模板库

**验收标准**：
- 可通过UI创建完整指令集
- 支持拖拽操作
- 可导入/导出JSON格式指令

### 里程碑 2.3 - 账号系统

**预计时间**：2周

- [ ] 实现用户注册/登录
- [ ] 实现角色管理
- [ ] 实现存档系统
- [ ] 实现云同步
- [ ] 实现冲突解决

**验收标准**：
- 用户可注册和登录
- 数据正确同步到服务器
- 支持多角色切换

### 里程碑 2.4 - 服务器端

**预计时间**：2周

- [ ] 实现挂机任务服务器
- [ ] 实现会话管理
- [ ] 实现后台游戏执行
- [ ] 实现结果通知
- [ ] 实现性能优化

**验收标准**：
- 离线时游戏继续运行
- 结果正确记录和同步
- 服务器稳定运行

### 阶段2交付物

- Web 版可玩客户端
- 指令可视化编辑器
- 账号和存档系统
- 挂机服务器
- 数据同步机制

---

## 阶段3：多人与扩展内容

**目标**：多人交易、扩展内容、平衡

**时间**：8-12周

### 里程碑 3.1 - 跨平台客户端

**预计时间**：3周

- [ ] 实现 WPF Blazor 混合桌面客户端
- [ ] 实现 MAUI Blazor 混合移动客户端
- [ ] 统一 UI 组件库
- [ ] 实现平台特定优化

### 里程碑 3.2 - 多人系统

**预计时间**：3周

- [ ] 实现玩家交易系统
- [ ] 实现好友系统
- [ ] 实现排行榜
- [ ] 实现成就系统

### 里程碑 3.3 - 内容扩展

**预计时间**：4周

- [ ] 添加更多装备底材
- [ ] 添加更多词缀
- [ ] 添加更多技能
- [ ] 添加更多地图类型
- [ ] 添加更多怪物种类
- [ ] 添加更多通货类型

### 里程碑 3.4 - 平衡与优化

**预计时间**：2周

- [ ] 数值平衡调整
- [ ] 性能优化
- [ ] Bug 修复
- [ ] 用户反馈处理

### 阶段3交付物

- 跨平台客户端（Web/Desktop/Mobile）
- 多人交易系统
- 丰富的游戏内容
- 平衡的游戏体验

---

## 长期规划

### v2.1 - 社交功能增强

- 公会系统
- 组队副本
- 聊天系统

### v2.2 - 赛季系统

- 赛季玩法
- 赛季专属内容
- 天梯排名

### v3.0 - 引擎移植

- Godot 引擎支持
- Unreal 引擎支持
- 3D 版本探索

---

## 风险与依赖

### 技术风险

| 风险 | 影响 | 缓解措施 |
|------|------|----------|
| Blazor 性能瓶颈 | 高 | 预研 WebAssembly 优化，关键逻辑使用原生代码 |
| 跨平台兼容性 | 中 | 早期引入多平台测试 |
| 服务器扩展性 | 高 | 采用微服务架构，支持水平扩展 |

### 外部依赖

| 依赖 | 状态 | 备选方案 |
|------|------|----------|
| .NET 8.0 | 已发布 | - |
| Bootstrap Blazor | 活跃维护 | MudBlazor, Radzen |
| MAUI | 相对稳定 | Avalonia |

### 资源需求

| 阶段 | 开发人力 | 其他资源 |
|------|----------|----------|
| 阶段0 | 1-2人 | 设计工具 |
| 阶段1 | 2-3人 | 开发环境、测试设备 |
| 阶段2 | 3-4人 | 服务器、数据库 |
| 阶段3 | 4-5人 | 多平台测试设备、CDN |

---

## 版本发布计划

| 版本 | 预计日期 | 内容 |
|------|----------|------|
| v0.1 | 阶段0完成 | 设计文档 |
| v0.2 | +2周 | 项目骨架 |
| v0.5 | +10周 | Alpha 可玩版 |
| v0.8 | +18周 | Beta 版 |
| v1.0 | +22周 | 正式发布 |
| v2.0 | +34周 | 多人版本 |

---

## 相关文档

- [设计文档](../DESIGN.md)
- [玩法细节](docs-gameplay.md)
- [数据模型](docs-data-models.md)
- [AI指令系统](docs-ai-instructions.md)
