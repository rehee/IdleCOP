# 玩法细节

> 本文档详细描述 IdleCOP 的核心玩法机制

## 目录

1. [游戏模式](#游戏模式)
2. [装备系统](#装备系统)
3. [技能系统](#技能系统)
4. [战斗系统](#战斗系统)
5. [通货与经济](#通货与经济)
6. [地图探索](#地图探索)
7. [角色成长](#角色成长)

---

## 游戏模式

### 放置模式（Idle Mode）

角色按照预设的指令脚本自动执行行为，包括：
- 自动移动与探索地图
- 自动使用技能进行战斗
- 自动拾取掉落物品
- 自动使用消耗品

**特点：**
- 离线时继续运行（服务器后台执行）
- 支持复杂的条件判断和优先级设置
- 可设置自动回城/修理/整理等行为

### 手操模式（Manual Mode）

玩家实时控制角色：
- 实时移动和技能释放
- 即时响应战斗状况
- 精确控制技能时机

**模式切换：**
- 随时可在两种模式间切换
- 切换时保留当前状态
- 手操时暂停自动指令执行

---

## 装备系统

### 装备分类

| 部位 | 英文名 | 可装备数量 |
|------|--------|------------|
| 头盔 | Helmet | 1 |
| 护肩 | Shoulders | 1 |
| 胸甲 | Chest | 1 |
| 手套 | Gloves | 1 |
| 腰带 | Belt | 1 |
| 腿甲 | Pants | 1 |
| 靴子 | Boots | 1 |
| 护腕 | Bracers | 1 |
| 项链 | Amulet | 1 |
| 戒指 | Ring | 2 |
| 主手 | Main Hand | 1 |
| 副手 | Off Hand | 1 |

### 底材（Base Type）

每种装备部位有多种底材类型，决定：
- 基础属性数值
- 可承载的词缀类型
- 装备需求（等级、属性）

**示例底材：**
```
头盔底材：
├── 布甲头盔（智力系）
├── 皮甲头盔（敏捷系）
├── 锁甲头盔（力量系）
└── 板甲头盔（力量系高防）
```

### 品质（Quality）

| 品质 | 颜色 | 词缀数量 | 掉率权重 |
|------|------|----------|----------|
| 普通 (Normal) | 白色 | 0 | 60% |
| 魔法 (Magic) | 蓝色 | 1-2 | 25% |
| 稀有 (Rare) | 紫色 | 3-4 | 12% |
| 传奇 (Legendary) | 橙色 | 4-6 | 3% |

### 词缀系统（Affixes）

#### 前缀（Prefix）
- 每件装备最多 3 个前缀
- 主要提供攻击性属性

**常见前缀：**
```
T1 凶残的 - 增加 20-30% 物理伤害
T2 残暴的 - 增加 14-19% 物理伤害
T3 野蛮的 - 增加 8-13% 物理伤害
```

#### 后缀（Suffix）
- 每件装备最多 3 个后缀
- 主要提供防御性和功能性属性

**常见后缀：**
```
T1 ...巨人 - 增加 80-100 最大生命
T2 ...战士 - 增加 50-79 最大生命
T3 ...护卫 - 增加 30-49 最大生命
```

### 装备强化

- **品质提升**：消耗通货提升装备品质百分比
- **词缀重铸**：消耗通货重新随机词缀
- **词缀增删**：使用特定通货添加/移除词缀
- **镶嵌系统**：在有孔装备中镶嵌宝石

---

## 技能系统

### 技能分类

#### 主动技能（Active Skills）

玩家或AI主动释放的技能：

| 类型 | 说明 | 示例 |
|------|------|------|
| 近战 | 近身物理攻击 | 横扫、猛击、旋风斩 |
| 远程 | 远程物理攻击 | 多重射击、穿透射击 |
| 法术 | 魔法伤害攻击 | 火球、冰锥、闪电链 |
| 召唤 | 召唤生物助战 | 召唤骷髅、召唤图腾 |
| 位移 | 移动类技能 | 闪现、冲锋、翻滚 |
| 增益 | 状态增强 | 战吼、光环、祝福 |

#### 辅助技能（Support Skills）

挂接到主动技能上，增强或改变其效果：

| 辅助技能 | 效果 |
|----------|------|
| 多重投射 | 技能发射额外投射物 |
| 穿透 | 投射物可穿透敌人 |
| 连锁 | 攻击可弹射到附近敌人 |
| 增大范围 | 增加技能影响范围 |
| 快速施法 | 减少施法时间 |
| 暴击强化 | 增加暴击率和暴击伤害 |

#### 触发技能（Trigger Skills）

满足条件时自动触发：

| 触发条件 | 示例技能 |
|----------|----------|
| 受击时 | 反击护盾、荆棘光环 |
| 击杀时 | 爆炸尸体、灵魂收割 |
| 暴击时 | 元素爆发、能量溢出 |
| 格挡时 | 反击冲击、能量吸收 |
| 生命低于阈值 | 紧急治疗、不屈意志 |

### 技能联动

```
主动技能配置示例：
火球术
├── 辅助：多重投射（发射3颗火球）
├── 辅助：燃烧增幅（增加燃烧伤害）
└── 触发：击杀时爆炸（击杀时触发范围爆炸）
```

---

## 战斗系统

### 属性系统

**基础属性：**
- 力量 (STR)：增加物理伤害、生命值
- 敏捷 (DEX)：增加攻击速度、闪避
- 智力 (INT)：增加法术伤害、能量护盾

**战斗属性：**
- 生命值 (HP)
- 能量 (MP/Energy)
- 护甲值 (Armor)
- 闪避率 (Evasion)
- 抗性 (Resistances)

### 伤害计算

```
最终伤害 = 基础伤害 
         × (1 + 增加百分比) 
         × (1 + 更多乘数1) × (1 + 更多乘数2) ...
         × (1 - 伤害减免)
         × 暴击乘数（如果暴击）
```

### 元素与状态

**元素类型：**
- 物理、火焰、冰冷、闪电、混沌

**异常状态：**
- 点燃（火焰）：持续伤害
- 冰冻（冰冷）：无法行动
- 感电（闪电）：增加受到的伤害
- 中毒（混沌）：叠加持续伤害

---

## 通货与经济

### 通货类型

避免统一金币，使用多种功能性通货：

| 通货 | 功能 |
|------|------|
| 蜕变石 | 普通装备升级为魔法装备 |
| 改造石 | 重新随机魔法装备词缀 |
| 增幅石 | 为魔法装备添加一条词缀 |
| 富豪石 | 魔法装备升级为稀有装备 |
| 混沌石 | 重新随机稀有装备词缀 |
| 崇高石 | 为稀有装备添加一条词缀 |
| 神圣石 | 重新随机装备数值 |
| 工匠石 | 提升装备品质 |

### 通货获取

- 怪物掉落
- 任务奖励
- 装备分解
- NPC交易

### 通货存储

- 账号全局共享
- 可堆叠存储
- 自动整理

---

## 地图探索

### 程序化生成

每次进入地图随机生成：
- 地形布局
- 怪物配置
- 宝箱位置
- BOSS房间

### 区域类型

| 区域 | 特点 |
|------|------|
| 平原 | 基础区域，怪物密度适中 |
| 森林 | 地形复杂，伏击较多 |
| 地下城 | 线性结构，BOSS守关 |
| 废墟 | 精英怪物较多 |
| 虚空 | 高难度，高回报 |

### 难度等级

- 地图有等级要求
- 更高等级 = 更强怪物 + 更好掉落
- 可通过通货提升地图难度

---

## 角色成长

### 等级系统

- 击杀怪物获得经验
- 升级获得属性点和技能点
- 等级上限：100

### 天赋树

- 解锁被动技能
- 定制角色流派
- 支持多种构建路线

### 专精系统

- 达到特定等级解锁
- 选择专精方向
- 获得专属技能和被动

---

## 附录

### 游戏流程示例

```
1. 创建角色 → 选择初始职业
2. 完成新手教程 → 了解基础操作
3. 配置指令脚本 → 设置自动行为
4. 进入第一张地图 → 开始战斗
5. 收集装备和通货 → 强化角色
6. 挑战更高难度 → 循环成长
```

### 相关文档

- [数据模型](docs-data-models.md)
- [AI指令系统](docs-ai-instructions.md)
- [开发路线图](docs-roadmap.md)
